"use strict";!function(){if(document.querySelector("#basket")){var e=function(){var e={name:this.dataset.name,size:this.dataset.size,price:this.dataset.price,number:"1",img:this.dataset.img};if(null===localStorage.getItem("basket")){var r=[];r.push(e),localStorage.setItem("basket",JSON.stringify(r)),t(),a(),n()}else{var c=JSON.parse(localStorage.getItem("basket")),o=this.dataset.name;if(c.find(function(e){return e.name==o}))c.find(function(e){return e.name===o}).number++;else c.push(e);localStorage.setItem("basket",JSON.stringify(c)),t(),a(),n()}},t=function(){null===localStorage.getItem("basket")?r.innerHTML=0:r.innerHTML=JSON.parse(localStorage.getItem("basket")).reduce(function(e,t){return e+ +t.number},0)},a=function(){null===localStorage.getItem("basket")?c.innerHTML=0:c.innerHTML=JSON.parse(localStorage.getItem("basket")).map(function(e){return e.price*e.number}).reduce(function(e,t){return e+ +t},0)+"грн"},n=function(){null===localStorage.getItem("basket")?o.innerHTML="":o.innerHTML=JSON.parse(localStorage.getItem("basket")).reduce(function(e,t,a){return e+'<p data-id="'.concat(a,'"><i></i>').concat(t.name," [").concat(t.number,"]: ").concat(t.size," - ").concat(t.price,"грн</p>")},"")},r=document.querySelector("#basket-quantity"),c=document.querySelector("#basket-sum"),o=document.querySelector("#basket-goods");document.querySelectorAll("button").forEach(function(t){return t.addEventListener("click",e)}),document.querySelector("#basket-clear").addEventListener("click",function(){localStorage.clear("basket"),a(),t(),n()}),o.addEventListener("click",function(e){return function(e){if("I"===e.target.tagName){var r=e.target.parentNode.dataset.id,c=JSON.parse(localStorage.getItem("basket"));c.splice(r,1),0===c.length?localStorage.removeItem("basket"):localStorage.setItem("basket",JSON.stringify(c)),a(),t(),n()}}(e)}),a(),t(),n()}if(document.querySelector("#order-goods")){var s=function(){null===localStorage.getItem("basket")?l.innerHTML="":l.innerHTML=JSON.parse(localStorage.getItem("basket")).reduce(function(e,t,a){return e+'<p data-id="'.concat(a,'"><img src="').concat(t.img,'" alt=""><i></i><b>').concat(t.name,"</b><span>").concat(t.size," </span><span><b>").concat(t.price,'</b>грн </span><span class="minus"></span><span class="number">').concat(t.number,'</span><span class="plus"></span></p>')},"")},i=function(){null===localStorage.getItem("basket")?u.innerHTML=0:u.innerHTML=JSON.parse(localStorage.getItem("basket")).map(function(e){return e.price*e.number}).reduce(function(e,t){return e+ +t},0)+"грн"},l=document.querySelector("#order-goods"),u=document.querySelector("#order-sum");l.addEventListener("click",function(e){return function(e){var t=e.target.parentNode.dataset.id,a=JSON.parse(localStorage.getItem("basket"));"I"===e.target.tagName?(a.splice(t,1),0===a.length?localStorage.removeItem("basket"):localStorage.setItem("basket",JSON.stringify(a))):"minus"===e.target.className?a[t].number>1?a[t].number--:a.splice(t,1):"plus"===e.target.className&&a[t].number++,localStorage.setItem("basket",JSON.stringify(a)),s(),i()}(e)}),s(),i()}}();